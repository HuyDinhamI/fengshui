<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Fengshui - Ứng dung AI phong thủy</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="" name="keywords">
    <meta content="" name="description">

    <!-- Favicon -->
    <link href="img/favicon.ico" rel="icon">

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&family=Ubuntu:wght@500;700&display=swap"
        rel="stylesheet">

    <!-- Icon Font Stylesheet -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Libraries Stylesheet -->
    <link href="lib/animate/animate.min.css" rel="stylesheet">
    <link href="lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">

    <!-- Customized Bootstrap Stylesheet -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Template Stylesheet -->
    <link href="css/style.css" rel="stylesheet">
</head>

<body onload="getProfile()">
    <!-- Spinner Start -->
    <div id="spinner"
        class="show bg-white position-fixed translate-middle w-100 vh-100 top-50 start-50 d-flex align-items-center justify-content-center">
        <div class="spinner-grow text-primary" style="width: 3rem; height: 3rem;" role="status">
            <span class="sr-only">Loading...</span>
        </div>
    </div>
    <!-- Spinner End -->



    <!-- Navbar Start -->
    <div class="container-fluid sticky-top">
        <div class="container">
            <nav class="navbar navbar-expand-lg navbar-dark p-0">
                <a href="index.html" class="navbar-brand">
                    <h1 class="text-white">Fengshui<span class="text-dark">.</span>AI</h1>
                </a>
                <button type="button" class="navbar-toggler ms-auto me-0" data-bs-toggle="collapse"
                    data-bs-target="#navbarCollapse">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarCollapse">
                    <div class="navbar-nav ms-auto">
                        <a href="index.html" class="nav-item nav-link ">Trang chủ</a>
                        <a href="about.html" class="nav-item nav-link">Về chúng tôi</a>
                        <a href="service.html" class="nav-item nav-link">Tính năng</a>
                        <a href="project.html" class="nav-item nav-link">Vật phẩm </a>
                        <!-- <a href="price.html" class="nav-item nav-link">Bảng giá</a> -->
                        <a href="contact.html" class="nav-item nav-link active">Tài khoản</a>
                    </div>
                    <butaton type="button" class="btn text-white p-0 d-none d-lg-block" data-bs-toggle="modal"
                        data-bs-target="#searchModal"><i class="fa fa-search"></i></butaton>
                </div>
            </nav>
        </div>
    </div>
    <!-- Navbar End -->


    <!-- Hero Start -->
    <div class="container-fluid pt-5 bg-primary hero-header">
        <div class="container pt-5">
            <div class="row g-5 pt-5">
                <div class="col-lg-6 align-self-center text-center text-lg-start mb-lg-5">
                    <h1 class="display-4 text-white mb-4 animated slideInRight">Tài khoản</h1>
                    <nav aria-label="breadcrumb">
                        <ol class="breadcrumb justify-content-center justify-content-lg-start mb-0">
                            <li class="breadcrumb-item"><a class="text-white" href="#">Trang chủ</a></li>
                            <li class="breadcrumb-item"><a class="text-white" href="#">Tài khoản</a></li>
                        </ol>
                    </nav>
                </div>
                <div class="col-lg-6 align-self-end text-center text-lg-end">
                    <img class="img-fluid" src="img/new/banner.png" alt="" style="max-height: 300px;">
                </div>
            </div>
        </div>
    </div>
    <!-- Hero End -->


    <!-- Full Screen Search Start -->
    <div class="modal fade" id="searchModal" tabindex="-1">
        <div class="modal-dialog modal-fullscreen">
            <div class="modal-content" style="background: rgba(20, 24, 62, 0.7);">
                <div class="modal-header border-0">
                    <button type="button" class="btn btn-square bg-white btn-close" data-bs-dismiss="modal"
                        aria-label="Close"></button>
                </div>
                <div class="modal-body d-flex align-items-center justify-content-center">
                    <div class="input-group" style="max-width: 600px;">
                        <input type="text" class="form-control bg-transparent border-light p-3"
                            placeholder="Type search keyword">
                        <button class="btn btn-light px-4"><i class="bi bi-search"></i></button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Full Screen Search End -->


    <!-- Profile Start -->
    <div class="container-fluid py-5">
        <div class="container py-5">
            <div class="mx-auto text-center wow fadeIn" data-wow-delay="0.1s" style="max-width: 600px;">
                <div class="btn btn-sm border rounded-pill text-primary px-3 mb-3">Hồ Sơ Của Tôi</div>
                <h1 class="mb-4">Thông Tin Tài Khoản Fengshui</h1>
            </div>
            <div class="row g-5 justify-content-center">
                <div class="col-lg-10 col-xl-9 wow fadeIn" data-wow-delay="0.3s">
                    <div class="card shadow-sm mb-4" style="border-radius: 15px;">
                        <div class="card-body p-4">
                            <div class="row align-items-center">
                                <div class="col-md-3 text-center text-md-start mb-3 mb-md-0">
                                    <div class="position-relative d-inline-block">
                                        <img src="img/new/avatar-1.png" alt="Ảnh đại diện"
                                            class="img-fluid rounded-circle"
                                            style="width: 120px; height: 120px; object-fit: cover; border: 3px solid #eee;">
                                        <label for="avatarUpload"
                                            class="position-absolute bottom-0 end-0 bg-primary text-white rounded-circle p-2"
                                            style="cursor: pointer;">
                                            <i class="fas fa-camera"></i>
                                        </label>
                                        <input type="file" id="avatarUpload" class="d-none" accept="image/*">
                                    </div>
                                </div>
                                <div class="col-md-5" id="userInfo">
                                    <h4 class="mb-1" id="userName">Mr. Jack Sparrow</h4>
                                    <span class="badge bg-warning text-dark px-3 py-1 mb-2"
                                        style="font-size: 0.9rem; border-radius: 20px;" id="userPlan">Gói Fengshui
                                        thường</span>
                                    <ul class="list-unstyled mb-0" style="font-size: 0.9rem; line-height: 1.6;">
                                        <li><strong>Giới tính:</strong> <span id="userGender">Nam</span></li>
                                        <li><strong>Mệnh:</strong> <span id="userElement">Mộc</span></li>
                                        <li><strong>Ngày tạo tài khoản:</strong> <span
                                                id="userRegisterDate">05/03/2025</span>
                                        <li><strong>Ngày hết hạn gói:</strong> <span
                                                id="userExpireDate">05/03/2099</span>
                                        </li>
                                    </ul>
                                </div>
                                <div class="col-md-4 text-center mt-3 mt-md-0">
                                    <button class="btn btn-danger mb-2" onclick="logout()">
                                        <i class="fas fa-sign-out-alt me-2"></i>Đăng xuất
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- <div class="col-lg-10 col-xl-9 wow fadeIn" data-wow-delay="0.5s">
                    <div class="card shadow-sm" style="border-radius: 15px;">
                        <div class="card-body p-4">
                            <h4 class="mb-3 border-bottom pb-2">Thông tin cơ bản</h4>
                            <ul class="list-unstyled mb-4" style="font-size: 0.95rem; line-height: 1.7;">
                                <li><strong>Ngày sinh (Dương lịch):</strong> 14/08/1989</li>
                                <li><strong>Tuổi âm:</strong> Kỷ Tỵ (rắn đất)</li>
                                <li><strong>Ngũ hành bản mệnh:</strong> Đại Lâm Mộc (gỗ rừng lớn)</li>
                                <li><strong>Quẻ mệnh:</strong> Tốn Mộc – Đông tứ mệnh</li>
                                <li><strong>Hướng tốt:</strong> Đông, Nam, Bắc, Đông Nam</li>
                            </ul>
                        </div>
                    </div>
                </div> -->
            </div>
        </div>
        <!-- Profile End -->

        <!-- Add JavaScript for mệnh calculation and avatar upload -->
        <script>
            var user = {};
            const BASE_URL = 'http://14.225.198.239:3000/api/user';
            // Function to calculate mệnh based on birth year
            const token = localStorage.getItem('token');
            if (!token || token === 'null' || token === 'undefined') {
                window.location.href = 'login.html';
            }
            function getProfile() {
                fetch(`${BASE_URL}/profile`, {
                    method: 'GET',
                    headers: {
                        'Authorization': `Bearer ${token}`
                    }
                }).then(response => response.json())
                    .then(data => {
                        console.log(data);


                        user = data.user;
                        plan = data.plan;
                        let expiredDate = user.plan_detail.expired_date ? new Date(user.plan_detail.expired_date).toLocaleDateString('vi-VN') : 'Không xác định';
                        document.getElementById('userName').textContent = user.name;
                        document.getElementById('userPlan').textContent = "Gói Fengshui " + plan.name;
                        document.getElementById('userRegisterDate').textContent = new Date(user.createdAt).toLocaleDateString('vi-VN');
                        document.getElementById('userGender').textContent = user.gender === "male" ? 'Nam' : 'Nữ';
                        document.getElementById('userElement').textContent = user.element;
                        document.getElementById('userExpireDate').textContent = expiredDate;
                    })
                    .catch(error => {
                        console.error('Error fetching profile:', error);
                    });
            }

            function calculateMenh(birthYear) {
                const can = ['Canh', 'Tân', 'Nhâm', 'Quý', 'Giáp', 'Ất', 'Bính', 'Đinh', 'Mậu', 'Kỷ'];
                const chi = ['Thân', 'Dậu', 'Tuất', 'Hợi', 'Tý', 'Sửu', 'Dần', 'Mão', 'Thìn', 'Tỵ', 'Ngọ', 'Mùi'];
                const nguHanh = ['Kim', 'Kim', 'Thủy', 'Thủy', 'Mộc', 'Mộc', 'Hỏa', 'Hỏa', 'Thổ', 'Thổ'];

                const canIndex = (birthYear - 4) % 10;
                const chiIndex = (birthYear - 4) % 12;

                return nguHanh[canIndex];
            }

            // Function to handle avatar upload
            document.getElementById('avatarUpload').addEventListener('change', function (e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function (e) {
                        document.querySelector('.rounded-circle').src = e.target.result;
                    }
                    reader.readAsDataURL(file);
                }
            });



            // Function to handle logout
            function logout() {
                if (confirm('Bạn có chắc chắn muốn đăng xuất?')) {
                    // Add your logout logic here
                    localStorage.removeItem('token');
                    window.location.href = 'index.html';
                }
            }

            // Calculate and display mệnh based on birth year (1980-2005)
            const birthYear = 1989; // This should be dynamic based on user input
            if (birthYear >= 1980 && birthYear <= 2005) {
                document.getElementById('userMenh').textContent = calculateMenh(birthYear);
            }
        </script>

        <!-- Footer Start -->
        <div class="container-fluid bg-dark text-white-50 footer pt-5">
            <div class="container py-5">
                <div class="row g-5">
                    <div class="col-md-6 col-lg-3 wow fadeIn" data-wow-delay="0.1s">
                        <a href="index.html" class="d-inline-block mb-3">
                            <h1 class="text-white">Fengshui<span class="text-primary">.</span>AI</h1>
                        </a>
                        <p class="mb-0" style="text-align: justify;">Fengshui.AI mang đến giải pháp tư vấn phong thủy
                            ứng
                            dụng Trí Tuệ Nhân Tạo, giúp bạn hài hòa không gian sống, cải thiện vận mệnh và kiến tạo
                            tương
                            lai thịnh vượng.</p>
                    </div>
                    <div class="col-md-6 col-lg-3 wow fadeIn" data-wow-delay="0.3s">
                        <h5 class="text-white mb-4">Liên Hệ Với Chúng Tôi</h5>
                        <p><i class="fa fa-map-marker-alt me-3"></i>Hà Nội, Việt Nam</p>
                        <p><i class="fa fa-phone-alt me-3"></i>+84 123 456 789</p>
                        <p><i class="fa fa-envelope me-3"></i>hotro@fengshui.vn</p>
                        <div class="d-flex pt-2">
                            <a class="btn btn-outline-light btn-social" href="#" aria-label="Twitter"><i
                                    class="fab fa-twitter"></i></a>
                            <a class="btn btn-outline-light btn-social" href="#" aria-label="Facebook"><i
                                    class="fab fa-facebook-f"></i></a>
                            <a class="btn btn-outline-light btn-social" href="#" aria-label="YouTube"><i
                                    class="fab fa-youtube"></i></a>
                            <a class="btn btn-outline-light btn-social" href="#" aria-label="Instagram"><i
                                    class="fab fa-instagram"></i></a>
                            <a class="btn btn-outline-light btn-social" href="#" aria-label="LinkedIn"><i
                                    class="fab fa-linkedin-in"></i></a>
                        </div>
                    </div>
                    <div class="col-md-6 col-lg-3 wow fadeIn" data-wow-delay="0.5s">
                        <h5 class="text-white mb-4">Liên Kết Hữu Ích</h5>
                        <a class="btn btn-link" href="#">Về Chúng Tôi</a>
                        <a class="btn btn-link" href="#">Liên Hệ</a>
                        <a class="btn btn-link" href="#">Chính Sách Bảo Mật</a>
                        <a class="btn btn-link" href="#">Điều Khoản Dịch Vụ</a>
                        <a class="btn btn-link" href="#">Tuyển Dụng</a>
                    </div>
                    <div class="col-md-6 col-lg-3 wow fadeIn" data-wow-delay="0.7s">
                        <h5 class="text-white mb-4">Dịch Vụ Của Chúng Tôi</h5>
                        <a class="btn btn-link" href="#">Xem Ngày Tốt</a>
                        <a class="btn btn-link" href="#">Vật Phẩm Phong Thủy</a>
                        <a class="btn btn-link" href="#">Sắp Xếp Đồ Đạc</a>
                        <a class="btn btn-link" href="#">Tư Vấn Phong Thủy AI</a>
                        <a class="btn btn-link" href="#">Trải Nghiệm VR/AR</a>
                        <a class="btn btn-link" href="#">Xem Tử Vi</a>
                    </div>
                </div>
            </div>
            <div class="container wow fadeIn" data-wow-delay="0.1s">
                <div class="copyright">
                    <div class="row">
                        <div class="col-md-6 text-center text-md-start mb-3 mb-md-0">
                            &copy; <a class="border-bottom" href="#">Fengshui.AI</a>, Mọi quyền được bảo lưu
                        </div>
                        <div class="col-md-6 text-center text-md-end">
                            <div class="footer-menu">
                                <a href="#">Trang Chủ</a>
                                <a href="#">Cookies</a>
                                <a href="#">Hỗ Trợ</a>
                                <a href="#">FAQs</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Footer End -->


        <!-- Back to Top -->
        <a href="#" class="btn btn-lg btn-primary btn-lg-square back-to-top pt-2"><i class="bi bi-arrow-up"></i></a>


        <!-- JavaScript Libraries -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
        <script src="lib/wow/wow.min.js"></script>
        <script src="lib/easing/easing.min.js"></script>
        <script src="lib/waypoints/waypoints.min.js"></script>
        <script src="lib/counterup/counterup.min.js"></script>
        <script src="lib/owlcarousel/owl.carousel.min.js"></script>

        <!-- Template Javascript -->
        <script src="js/main.js"></script>
</body>

</html>