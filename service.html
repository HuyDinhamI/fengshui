<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Fengshui - Ứng dung AI phong thủy</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="" name="keywords">
    <meta content="" name="description">

    <!-- Favicon -->
    <link href="img/favicon.ico" rel="icon">

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&family=Ubuntu:wght@500;700&display=swap"
        rel="stylesheet">

    <!-- Icon Font Stylesheet -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Libraries Stylesheet -->
    <link href="lib/animate/animate.min.css" rel="stylesheet">
    <link href="lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">

    <!-- Customized Bootstrap Stylesheet -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Template Stylesheet -->
    <link href="css/style.css" rel="stylesheet">

    <style>
        /* Modal Styles */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(44, 63, 80, 0.45);
            z-index: 9999;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(2px);
        }

        .modal-container {
            background: #fff;
            border-radius: 24px;
            max-width: 1200px;
            width: 98vw;
            min-height: 320px;
            max-height: 90vh;
            box-shadow: 0 8px 32px rgba(44, 63, 80, 0.13);
            position: relative;
            display: flex;
            flex-direction: column;
            padding: 1.2rem 1.2rem 1.2rem 1.2rem;
            overflow-y: auto;
        }

        .modal-header {
            padding: 1.2rem 1.5rem 0.7rem 1.5rem;
            border-bottom: 1px solid #eee;
            display: flex;
            align-items: center;
            gap: 0.7rem;
            font-size: 1.25rem;
            font-weight: 700;
            color: #388e3c;
        }

        .modal-body {
            flex: 1;
            overflow-y: auto;
            padding: 1.2rem 1.5rem;
            scroll-behavior: smooth;
        }

        .modal-close {
            position: fixed;
            top: 24px;
            right: 40px;
            z-index: 10001;
            background: transparent;
            border: none;
            font-size: 2rem;
            color: #ffffff;
            cursor: pointer;
            box-shadow: none;
        }

        /* Calendar Styles */
        .calendar-box {
            background: #fff;
            border-radius: 12px;
            padding: 1rem;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .calendar-table {
            width: 100%;
            border-collapse: collapse;
        }

        .calendar-table th,
        .calendar-table td {
            text-align: center;
            padding: 0.5rem;
            border: 1px solid #eee;
        }

        .calendar-table td {
            cursor: pointer;
            transition: all 0.2s;
        }

        .calendar-table td:hover {
            background: #e6f7e0;
        }

        .calendar-table td.today {
            background: #4A8B2C;
            color: white;
        }

        .calendar-info {
            padding: 1rem;
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .info-section {
            margin-top: 1rem;
            padding: 1rem;
            border: 1px solid #eee;
            border-radius: 8px;
        }

        /* Arrange Styles */
        .upload-area {
            border: 2px dashed #ccc;
            border-radius: 8px;
            padding: 2rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .upload-area.dragover {
            border-color: #4A8B2C;
            background: #e6f7e0;
        }

        .suggestion-card {
            border: 1px solid #eee;
            border-radius: 8px;
            overflow: hidden;
            margin-bottom: 1rem;
        }

        .suggestion-card img {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }

        .card-content {
            padding: 1rem;
        }

        @media (max-width: 700px) {
            .modal-container {
                min-height: 220px;
                max-width: 99vw;
            }
        }

        .fs-calendar-modal-row {
            display: flex;
            gap: 2.5rem;
            margin-top: 1.5rem;
            min-width: 0;
        }

        .fs-calendar-modal-col.calendar-col {
            flex: 0 0 410px;
            min-width: 340px;
        }

        .fs-calendar-modal-col.info-col {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 1.2rem;
            min-width: 0;
        }

        .fs-calendar-box {
            background: #fff;
            border-radius: 18px;
            border: 2px solid #222;
            padding: 1.2rem 1.2rem 1.5rem 1.2rem;
        }

        .fs-calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .fs-calendar-table {
            width: 100%;
            border-collapse: collapse;
        }

        .fs-calendar-table th,
        .fs-calendar-table td {
            text-align: center;
            padding: 0.6rem 0.2rem;
            border: 1px solid #222;
            font-size: 1.08rem;
        }

        .fs-calendar-table th {
            background: #22313f;
            color: #fff;
            font-weight: 600;
        }

        .fs-calendar-table th.sun,
        .fs-calendar-table td.sun {
            color: #e74c3c;
        }

        .fs-calendar-table th.sat,
        .fs-calendar-table td.sat {
            color: #e74c3c;
        }

        .fs-calendar-table td {
            background: #fff;
            cursor: pointer;
            transition: background 0.2s, color 0.2s;
        }

        .fs-calendar-table td.selected {
            background: #ffe0b2;
            border: 2px solid #22313f;
            font-weight: 700;
        }

        .fs-calendar-table td.today {
            background: #b2dfdb;
            color: #222;
        }

        .fs-info-box {
            border: 2px solid #222;
            border-radius: 24px;
            padding: 1.1rem 1.5rem;
            margin-bottom: 0.2rem;
            background: #fff;
        }

        @media (max-width: 1200px) {
            .modal-container {
                max-width: 99vw;
                padding: 1.2rem;
            }

            .fs-calendar-modal-row {
                gap: 1.2rem;
            }

            .fs-calendar-modal-col.calendar-col {
                flex: 0 0 320px;
            }
        }

        @media (max-width: 900px) {
            .fs-calendar-modal-row {
                flex-direction: column;
                gap: 1.2rem;
            }

            .fs-calendar-modal-col.calendar-col {
                flex: 1;
            }

            .modal-container {
                max-width: 99vw;
                padding: 0.7rem;
            }

            .modal-close {
                top: 12px;
                right: 18px;
                font-size: 1.7rem;
            }
        }

        @media (max-width: 600px) {
            .fs-info-box {
                padding: 0.7rem 0.7rem;
                font-size: 0.98rem;
            }

            .fs-calendar-modal-row {
                gap: 0.5rem;
            }
        }

        .fs-calendar-modal-vertical {
            display: flex;
            flex-direction: column;
            gap: 2.2rem;
        }

        .calendar-box-standalone {
            margin: 0 auto;
            max-width: 600px;
            width: 100%;
        }

        .fs-calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .fs-calendar-table {
            width: 100%;
            border-collapse: collapse;
        }

        .fs-calendar-table th,
        .fs-calendar-table td {
            text-align: center;
            padding: 0.6rem 0.2rem;
            border: 1.5px solid #222;
            font-size: 1.08rem;
        }

        .fs-calendar-table th {
            background: #22313f;
            color: #fff;
            font-weight: 600;
        }

        .fs-calendar-table th.sun,
        .fs-calendar-table td.sun {
            color: #e74c3c;
        }

        .fs-calendar-table th.sat,
        .fs-calendar-table td.sat {
            color: #e74c3c;
        }

        .fs-calendar-table td {
            background: #fff;
            cursor: pointer;
            transition: background 0.2s, color 0.2s;
        }

        .fs-calendar-table td.selected {
            background: #ffe0b2;
            border: 2px solid #22313f;
            font-weight: 700;
        }

        .fs-calendar-table td.today {
            background: #b2dfdb;
            color: #222;
        }

        .fs-info-boxes-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
        }

        .fs-info-box {
            border: 2px solid #222;
            border-radius: 24px;
            padding: 1.1rem 1.5rem;
            background: #fff;
            min-width: 0;
        }

        @media (max-width: 900px) {
            .fs-info-boxes-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }

            .calendar-box-standalone {
                max-width: 100%;
            }
        }

        @media (max-width: 600px) {
            .fs-info-box {
                padding: 0.7rem 0.7rem;
                font-size: 0.98rem;
            }

            .fs-calendar-modal-vertical {
                gap: 1rem;
            }
        }

        .fs-chat-modal {
            display: flex;
            flex-direction: column;
            height: 600px;
            max-height: 90vh;
        }

        .fs-chat-messages {
            flex: 1;
            overflow-y: auto;
            background: #f7f7f7;
            border-radius: 12px;
            padding: 1rem;
            margin-bottom: 0.7rem;
            min-height: 120px;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .fs-chat-msg {
            max-width: 75%;
            padding: 0.8rem 1.2rem;
            border-radius: 18px;
            font-size: 1.08rem;
            line-height: 1.6;
            word-break: break-word;
            display: inline-block;
            position: relative;
            box-shadow: 0 2px 8px rgba(44, 63, 80, 0.07);
        }

        .fs-chat-msg.assistant {
            background: #e6f7e0;
            color: #388e3c;
            align-self: flex-start;
            border-bottom-left-radius: 6px;
            border-bottom-right-radius: 18px;
            margin-right: auto;
        }

        .fs-chat-msg.user {
            background: linear-gradient(90deg, #4A8B2C 0%, #7ed957 100%);
            color: #fff;
            align-self: flex-end;
            border-bottom-right-radius: 6px;
            border-bottom-left-radius: 18px;
            margin-left: auto;
        }

        .fs-chat-form {
            display: flex;
            align-items: center;
            gap: 0.7rem;
            border-top: 1px solid #eee;
            padding: 0.7rem 0.2rem 0 0.2rem;
            background: #fafafa;
        }

        .fs-upload-label {
            cursor: pointer;
            color: #388e3c;
            font-size: 1.5rem;
            margin-right: 0.3rem;
            display: block;
        }

        .fs-upload-label.hidden {
            display: none;
        }

        .fs-upload-label:hover {
            color: #2e7031;
        }

        #fs-chat-input.form-control {
            flex: 1;
            min-width: 0;
        }

        #fs-chat-form .btn-success {
            min-width: 44px;
        }

        #fs-create-image-btn-wrap {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .fs-create-image-btn {
            display: flex;
            align-items: center;
            gap: 0.7rem;
            background: linear-gradient(90deg, #4A8B2C 0%, #7ed957 100%);
            color: #fff;
            border: none;
            border-radius: 32px;
            font-size: 1.18rem;
            font-weight: 600;
            padding: 0.85rem 2.2rem;
            margin: 0.5rem auto 0 auto;
            box-shadow: 0 4px 16px rgba(74, 139, 44, 0.13);
            cursor: pointer;
            transition: background 0.2s, box-shadow 0.2s, transform 0.15s;
            outline: none;
        }

        .fs-create-image-btn:hover {
            background: linear-gradient(90deg, #388e3c 0%, #4A8B2C 100%);
            box-shadow: 0 6px 24px rgba(74, 139, 44, 0.18);
            transform: translateY(-2px) scale(1.04);
        }

        .fs-create-image-btn:disabled {
            cursor: not-allowed;
            transform: none;
            box-shadow: 0 4px 16px rgba(74, 139, 44, 0.13);
        }

        .fs-create-image-btn:disabled:hover {
            transform: none;
            box-shadow: 0 4px 16px rgba(74, 139, 44, 0.13);
        }

        .fs-create-image-btn .icon-wrap {
            display: flex;
            align-items: center;
            font-size: 1.4em;
            animation: fs-magic-glow 1.2s infinite alternate;
        }

        @keyframes fs-magic-glow {
            0% {
                filter: drop-shadow(0 0 0px #fff176);
            }

            100% {
                filter: drop-shadow(0 0 8px #fff176);
            }
        }

        @media (max-width: 600px) {
            .fs-chat-modal {
                height: 400px;
                max-height: 80vh;
            }

            .fs-chat-msg {
                font-size: 0.98rem;
            }

            .fs-create-image-btn {
                font-size: 1rem;
                padding: 0.7rem 1.2rem;
            }
        }

        .fs-image-preview {
            padding: 10px;
            background: #f8f9fa;
            border-radius: 8px;
            margin: 10px 0;
        }

        .preview-container {
            position: relative;
            display: inline-block;
        }

        .preview-container img {
            max-height: 150px;
            border-radius: 4px;
        }

        #fs-remove-image {
            position: absolute;
            top: -10px;
            right: -10px;
            padding: 2px 6px;
            border-radius: 50%;
        }

        .fs-chat-image {
            margin-top: 8px;
            position: relative;
            display: inline-block;
            width: 100%;
            max-width: 100%;
        }

        .fs-chat-image img {
            max-width: 100%;
            max-height: 400px;
            border-radius: 4px;
            display: block;
            width: 100%;
            object-fit: contain;
        }

        .fs-chat-image .download-btn {
            position: absolute;
            bottom: 10px;
            right: 10px;
            background: rgba(255, 255, 255, 0.85);
            border: none;
            border-radius: 50%;
            width: 38px;
            height: 38px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 8px rgba(44, 63, 80, 0.13);
            cursor: pointer;
            transition: background 0.2s;
            z-index: 2;
        }

        .fs-chat-image .download-btn:hover {
            background: #4A8B2C;
            color: #fff;
        }
    </style>
</head>

<body>
    <!-- Spinner Start -->
    <div id="spinner"
        class="show bg-white position-fixed translate-middle w-100 vh-100 top-50 start-50 d-flex align-items-center justify-content-center">
        <div class="spinner-grow text-primary" style="width: 3rem; height: 3rem;" role="status">
            <span class="sr-only">Loading...</span>
        </div>
    </div>
    <!-- Spinner End -->


    <!-- Navbar Start -->
    <div class="container-fluid sticky-top">
        <div class="container">
            <nav class="navbar navbar-expand-lg navbar-dark p-0">
                <a href="index.html" class="navbar-brand">
                    <h1 class="text-white">Fengshui<span class="text-dark">.</span>AI</h1>
                </a>
                <button type="button" class="navbar-toggler ms-auto me-0" data-bs-toggle="collapse"
                    data-bs-target="#navbarCollapse">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarCollapse">
                    <div class="navbar-nav ms-auto">
                        <a href="index.html" class="nav-item nav-link ">Trang chủ</a>
                        <a href="about.html" class="nav-item nav-link">Về chúng tôi</a>
                        <a href="service.html" class="nav-item nav-link active">Tính năng</a>
                        <a href="project.html" class="nav-item nav-link">Vật phẩm </a>
                        <!-- <a href="price.html" class="nav-item nav-link">Bảng giá</a> -->
                        <a href="contact.html" class="nav-item nav-link">Tài khoản</a>
                    </div>
                    <butaton type="button" class="btn text-white p-0 d-none d-lg-block" data-bs-toggle="modal"
                        data-bs-target="#searchModal"><i class="fa fa-search"></i></butaton>
                </div>
            </nav>
        </div>
    </div>
    <!-- Navbar End -->


    <!-- Hero Start -->
    <div class="container-fluid pt-5 bg-primary hero-header">
        <div class="container pt-5">
            <div class="row g-5 pt-5">
                <div class="col-lg-6 align-self-center text-center text-lg-start mb-lg-5">
                    <h1 class="display-4 text-white mb-4 animated slideInRight">Tính năng</h1>
                    <nav aria-label="breadcrumb">
                        <ol class="breadcrumb justify-content-center justify-content-lg-start mb-0">
                            <li class="breadcrumb-item"><a class="text-white" href="#">Trang chủ</a></li>
                            <li class="breadcrumb-item"><a class="text-white" href="#">Tính năng</a></li>
                        </ol>
                    </nav>
                </div>
                <div class="col-lg-6 align-self-end text-center text-lg-end">
                    <img class="img-fluid" src="img/new/banner.png" alt="" style="max-height: 300px;">
                </div>
            </div>
        </div>
    </div>
    <!-- Hero End -->


    <!-- Full Screen Search Start -->
    <div class="modal fade" id="searchModal" tabindex="-1">
        <div class="modal-dialog modal-fullscreen">
            <div class="modal-content" style="background: rgba(20, 24, 62, 0.7);">
                <div class="modal-header border-0">
                    <button type="button" class="btn btn-square bg-white btn-close" data-bs-dismiss="modal"
                        aria-label="Close"></button>
                </div>
                <div class="modal-body d-flex align-items-center justify-content-center">
                    <div class="input-group" style="max-width: 600px;">
                        <input type="text" class="form-control bg-transparent border-light p-3"
                            placeholder="Type search keyword">
                        <button class="btn btn-light px-4"><i class="bi bi-search"></i></button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Full Screen Search End -->


    <!-- Service Start -->
    <div class="container-fluid bg-light mt-5 py-5">
        <div class="container">
            <div class="col-lg-12 wow fadeIn" data-wow-delay="0.1s">
                <div class="btn btn-sm border rounded-pill text-primary px-3 mb-3">Các tính năng chính</div>
                <h1 class="mb-4">Những tính năng mà Fengshui cung cấp cho bạn</h1>
                <p class="mb-4">Trải nghiệm các ứng dụng phong thủy hiện đại kết hợp trí tuệ nhân tạo, được thiết kế cá
                    nhân hóa dành riêng cho bạn. Giúp bạn dễ dàng xem ngày tốt cho mọi sự kiện, lựa chọn vật phẩm may
                    mắn phù hợp, tối ưu hóa không gian sống và làm việc, nhận tư vấn phong thủy chuyên sâu từ hệ thống
                    AI, và khám phá vận mệnh chi tiết qua lá số tử vi cá nhân.</p>
            </div>
        </div>
        <div class="container py-5">
            <div class="row g-12 align-items-center">
                <div class="col-lg-12">
                    <div class="row g-4" id="service-list">
                        <div class="col-lg-4 col-md-6 col-12">
                            <div class="service-item d-flex flex-column justify-content-center text-center rounded"
                                data-service="calendar">
                                <div class="service-icon btn-square">
                                    <i class="fa fa-calendar-check fa-2x"></i>
                                </div>
                                <h5 class="mb-3">Xem Ngày Tốt</h5>
                                <p>Chọn ngày giờ tốt cho các sự kiện quan trọng, giúp mọi việc hanh thông, thuận lợi.
                                </p>
                                <a class="btn px-3 mt-auto mx-auto" href="javascript:void(0)"
                                    onclick="openModal('calendar')">Xem ngay</a>
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-6 col-12">
                            <div class="service-item d-flex flex-column justify-content-center text-center rounded"
                                data-service="item">
                                <div class="service-icon btn-square">
                                    <i class="fa fa-gem fa-2x"></i>
                                </div>
                                <h5 class="mb-3">Vật Phẩm Phong Thủy</h5>
                                <p>Khám phá vật phẩm phù hợp giúp tăng cường vượng khí, may mắn và tài lộc cho bạn.</p>
                                <a class="btn px-3 mt-auto mx-auto" href="/project.html">Xem ngay</a>
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-6 col-12">
                            <div class="service-item d-flex flex-column justify-content-center text-center rounded"
                                data-service="arrange">
                                <div class="service-icon btn-square">
                                    <i class="fa fa-home fa-2x"></i>
                                </div>
                                <h5 class="mb-3">Sắp Xếp Đồ Đạc</h5>
                                <p>Hướng dẫn bài trí nội thất tối ưu không gian sống, thu hút năng lượng tích cực.</p>
                                <a class="btn px-3 mt-auto mx-auto" href="javascript:void(0)"
                                    onclick="openModal('ai')">Xem ngay</a>
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-6 col-12">
                            <div class="service-item d-flex flex-column justify-content-center text-center rounded"
                                data-service="fortune">
                                <div class="service-icon btn-square">
                                    <i class="fa fa-star fa-2x"></i>
                                </div>
                                <h5 class="mb-3">Xem Tử Vi Chuyên Sâu</h5>
                                <p>Luận giải lá số tử vi chi tiết, thấu hiểu vận mệnh và nắm bắt cơ hội trong cuộc sống.
                                </p>
                                <a class="btn px-3 mt-auto mx-auto" href="javascript:void(0)">Xem ngay</a>
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-6 col-12">
                            <div class="service-item d-flex flex-column justify-content-center text-center rounded"
                                data-service="ai">
                                <div class="service-icon btn-square">
                                    <i class="fa fa-brain fa-2x"></i>
                                </div>
                                <h5 class="mb-3">Tư Vấn Phong Thủy AI</h5>
                                <p>Giải đáp mọi thắc mắc về phong thủy nhanh chóng, chính xác với chuyên gia AI.</p>
                                <a class="btn px-3 mt-auto mx-auto" href="javascript:void(0)">Xem ngay</a>
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-6 col-12">
                            <div class="service-item d-flex flex-column justify-content-center text-center rounded"
                                data-service="vrar">
                                <div class="service-icon btn-square">
                                    <i class="fa fa-vr-cardboard fa-2x"></i>
                                </div>
                                <h5 class="mb-3">Trải Nghiệm VR/AR</h5>
                                <p>Trực quan hóa không gian và vật phẩm phong thủy sống động qua công nghệ ảo.</p>
                                <a class="btn px-3 mt-auto mx-auto" href="javascript:void(0)">Xem ngay</a>
                            </div>
                        </div>

                    </div>
                    <!-- Panel hiển thị chi tiết chức năng -->
                    <div id="service-panel-overlay"
                        style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(44,63,80,0.45); z-index:9999; align-items:center; justify-content:center;">
                        <div id="service-panel"
                            style="background:#fff; border-radius:18px; max-width:900px; width:95vw; padding:2.5rem 1.2rem; box-shadow:0 8px 32px rgba(74,139,44,0.13); position:relative;">
                            <button onclick="closeServicePanel()"
                                style="position:absolute; top:18px; right:18px; background:transparent; border:none; font-size:1.5rem; color:#4A8B2C; cursor:pointer;"><i
                                    class="fa fa-times"></i></button>
                            <div id="service-panel-content"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Service End -->


    <!-- Footer Start -->
    <div class="container-fluid bg-dark text-white-50 footer pt-5">
        <div class="container py-5">
            <div class="row g-5">
                <div class="col-md-6 col-lg-3 wow fadeIn" data-wow-delay="0.1s">
                    <a href="index.html" class="d-inline-block mb-3">
                        <h1 class="text-white">Fengshui<span class="text-primary">.</span>AI</h1>
                    </a>
                    <p class="mb-0" style="text-align: justify;">Fengshui.AI mang đến giải pháp tư vấn phong thủy ứng
                        dụng Trí Tuệ Nhân Tạo, giúp bạn hài hòa không gian sống, cải thiện vận mệnh và kiến tạo tương
                        lai thịnh vượng.</p>
                </div>
                <div class="col-md-6 col-lg-3 wow fadeIn" data-wow-delay="0.3s">
                    <h5 class="text-white mb-4">Liên Hệ Với Chúng Tôi</h5>
                    <p><i class="fa fa-map-marker-alt me-3"></i>Hà Nội, Việt Nam</p>
                    <p><i class="fa fa-phone-alt me-3"></i>+84 123 456 789</p>
                    <p><i class="fa fa-envelope me-3"></i>hotro@fengshui.vn</p>
                    <div class="d-flex pt-2">
                        <a class="btn btn-outline-light btn-social" href="#" aria-label="Twitter"><i
                                class="fab fa-twitter"></i></a>
                        <a class="btn btn-outline-light btn-social" href="#" aria-label="Facebook"><i
                                class="fab fa-facebook-f"></i></a>
                        <a class="btn btn-outline-light btn-social" href="#" aria-label="YouTube"><i
                                class="fab fa-youtube"></i></a>
                        <a class="btn btn-outline-light btn-social" href="#" aria-label="Instagram"><i
                                class="fab fa-instagram"></i></a>
                        <a class="btn btn-outline-light btn-social" href="#" aria-label="LinkedIn"><i
                                class="fab fa-linkedin-in"></i></a>
                    </div>
                </div>
                <div class="col-md-6 col-lg-3 wow fadeIn" data-wow-delay="0.5s">
                    <h5 class="text-white mb-4">Liên Kết Hữu Ích</h5>
                    <a class="btn btn-link" href="#">Về Chúng Tôi</a>
                    <a class="btn btn-link" href="#">Liên Hệ</a>
                    <a class="btn btn-link" href="#">Chính Sách Bảo Mật</a>
                    <a class="btn btn-link" href="#">Điều Khoản Dịch Vụ</a>
                    <a class="btn btn-link" href="#">Tuyển Dụng</a>
                </div>
                <div class="col-md-6 col-lg-3 wow fadeIn" data-wow-delay="0.7s">
                    <h5 class="text-white mb-4">Dịch Vụ Của Chúng Tôi</h5>
                    <a class="btn btn-link" href="#">Xem Ngày Tốt</a>
                    <a class="btn btn-link" href="#">Vật Phẩm Phong Thủy</a>
                    <a class="btn btn-link" href="#">Sắp Xếp Đồ Đạc</a>
                    <a class="btn btn-link" href="#">Tư Vấn Phong Thủy AI</a>
                    <a class="btn btn-link" href="#">Trải Nghiệm VR/AR</a>
                    <a class="btn btn-link" href="#">Xem Tử Vi</a>
                </div>
            </div>
        </div>
        <div class="container wow fadeIn" data-wow-delay="0.1s">
            <div class="copyright">
                <div class="row">
                    <div class="col-md-6 text-center text-md-start mb-3 mb-md-0">
                        &copy; <a class="border-bottom" href="#">Fengshui.AI</a>, Mọi quyền được bảo lưu
                    </div>
                    <div class="col-md-6 text-center text-md-end">
                        <div class="footer-menu">
                            <a href="#">Trang Chủ</a>
                            <a href="#">Cookies</a>
                            <a href="#">Hỗ Trợ</a>
                            <a href="#">FAQs</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Footer End -->


    <!-- Back to Top -->
    <a href="#" class="btn btn-lg btn-primary btn-lg-square back-to-top pt-2"><i class="bi bi-arrow-up"></i></a>


    <!-- JavaScript Libraries -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="lib/wow/wow.min.js"></script>
    <script src="lib/easing/easing.min.js"></script>
    <script src="lib/waypoints/waypoints.min.js"></script>
    <script src="lib/counterup/counterup.min.js"></script>
    <script src="lib/owlcarousel/owl.carousel.min.js"></script>

    <!-- Template Javascript -->
    <script src="js/main.js"></script>

    <!-- Modal Container -->
    <div id="modal-overlay" class="modal-overlay">
        <div class="modal-container">
            <div id="modal-header" class="modal-header"></div>
            <div id="modal-body" class="modal-body"></div>
            <button class="modal-close" onclick="closeModal()">
                <i class="fa fa-times"></i>
            </button>
        </div>
    </div>

    <!-- Modal Data and Functions -->
    <script>
        // Modal Data Configuration
        const modalData = {
            calendar: {
                title: 'LỊCH PHONG THỦY',
                icon: '',
                content: `
                <div class="fs-calendar-modal-vertical">
                  <div class="fs-calendar-box calendar-box-standalone">
                    <div class="fs-calendar-header">
                      <button class="btn btn-sm btn-light" onclick="prevMonth()"><i class="fa fa-chevron-left"></i></button>
                      <span id="current-month" class="fw-bold"></span>
                      <button class="btn btn-sm btn-light" onclick="nextMonth()"><i class="fa fa-chevron-right"></i></button>
                    </div>
                    <table class="fs-calendar-table">
                      <thead>
                        <tr>
                          <th class="sun">Sunday</th>
                          <th>Monday</th>
                          <th>Tuesday</th>
                          <th>Wednesday</th>
                          <th>Thursday</th>
                          <th>Friday</th>
                          <th class="sat">Saturday</th>
                        </tr>
                      </thead>
                      <tbody id="calendar-days"></tbody>
                    </table>
                  </div>
                  <div class="fs-info-boxes-grid">
                    <div class="fs-info-box" id="fs-date-box"></div>
                    <div class="fs-info-box" id="fs-hour-box"></div>
                    <div class="fs-info-box" id="fs-good-box"></div>
                    <div class="fs-info-box" id="fs-bad-box"></div>
                  </div>
                </div>
                `
            },
            ai: {
                title: 'Chat AI Phong Thủy',
                icon: 'fa fa-brain',
                content: `
                  <div class="fs-chat-modal" style="width: 95%; max-width: 1100px; margin: 0 auto;">
                    <div id="fs-chat-messages" class="fs-chat-messages" style="height: 500px;"></div>
                    <div id="fs-image-preview" class="fs-image-preview" style="display:none;">
                      <div class="preview-container">
                        <img id="fs-preview-img" src="" alt="Preview">
                        <button id="fs-remove-image" class="btn btn-sm btn-danger">
                          <i class="fa fa-times"></i>
                        </button>
                      </div>
                    </div>
                    <div id="fs-create-image-btn-wrap" style="display:none;text-align:center;margin-top:1rem;"></div>
                    <form id="fs-chat-form" class="fs-chat-form" autocomplete="off" onsubmit="return false;">
                      <label class="fs-upload-label">
                        <input type="file" id="fs-chat-upload" accept="image/*" style="display:none">
                        <i class="fa fa-image"></i>
                      </label>
                      <input type="text" id="fs-chat-input" class="form-control" placeholder="Nhập câu hỏi...">
                      <button type="submit" class="btn btn-success"><i class="fa fa-paper-plane"></i></button>
                    </form>
                  </div>
                `
            }
        };

        // Modal Functions
        function openModal(type) {
            const data = modalData[type];
            if (!data) return;

            document.getElementById('modal-header').innerHTML = `
                <i class="${data.icon}"></i>
                ${data.title}
            `;
            document.getElementById('modal-body').innerHTML = data.content;
            document.getElementById('modal-overlay').style.display = 'flex';

            // Initialize specific modal functionality
            switch (type) {
                case 'calendar':
                    initCalendar();
                    break;
                case 'arrange':
                    initArrange();
                    break;
                case 'ai':
                    initAIChat();
                    break;
            }
        }

        function closeModal() {
            document.getElementById('modal-overlay').style.display = 'none';
        }

        // Calendar Functions
        let currentDate = new Date();

        function initCalendar() {
            updateCalendar();
            updateCalendarInfo();
        }

        function updateCalendar(selectedDay) {
            const year = currentDate.getFullYear();
            const month = currentDate.getMonth();
            const today = new Date();
            const selected = selectedDay || today.getDate();
            // Update month display
            const monthNames = ["Tháng 1", "Tháng 2", "Tháng 3", "Tháng 4", "Tháng 5", "Tháng 6",
                "Tháng 7", "Tháng 8", "Tháng 9", "Tháng 10", "Tháng 11", "Tháng 12"];
            document.getElementById('current-month').textContent = `${monthNames[month]} ${year}`;
            // Generate calendar days
            const firstDay = new Date(year, month, 1);
            const lastDay = new Date(year, month + 1, 0);
            const startingDay = firstDay.getDay();
            const totalDays = lastDay.getDate();
            let calendarHTML = '';
            let day = 1;
            for (let i = 0; i < 6; i++) {
                let row = '<tr>';
                for (let j = 0; j < 7; j++) {
                    if (i === 0 && j < startingDay) {
                        row += '<td></td>';
                    } else if (day > totalDays) {
                        row += '<td></td>';
                    } else {
                        const isToday = day === today.getDate() && month === today.getMonth() && year === today.getFullYear();
                        const isSelected = day === selected;
                        row += `<td class="${isToday ? 'today' : ''} ${isSelected ? 'selected' : ''} ${j === 0 ? 'sun' : ''} ${j === 6 ? 'sat' : ''}" onclick="selectDate(${day})">${day}</td>`;
                        day++;
                    }
                }
                row += '</tr>';
                calendarHTML += row;
                if (day > totalDays) break;
            }
            document.getElementById('calendar-days').innerHTML = calendarHTML;
        }

        function prevMonth() {
            currentDate.setMonth(currentDate.getMonth() - 1);
            updateCalendar();
        }

        function nextMonth() {
            currentDate.setMonth(currentDate.getMonth() + 1);
            updateCalendar();
        }

        function selectDate(day) {
            updateCalendar(day);
            updateCalendarInfo(new Date(currentDate.getFullYear(), currentDate.getMonth(), day));
        }

        function updateCalendarInfo(date = new Date()) {
            // Demo data - replace with actual fengshui calculations
            const d = date;
            // Box 1: Ngày
            document.getElementById('fs-date-box').innerHTML = `
              <div style="display:flex;align-items:center;gap:2rem;">
                <div style="font-size:3.5rem;font-weight:800;line-height:1;">${d.getDate()}</div>
                <div>
                  <div style="font-size:1.2rem;font-weight:600;">Tháng ${d.getMonth() + 1} năm ${d.getFullYear()}</div>
                  <div style="font-size:1.1rem;">${d.toLocaleDateString('vi-VN', { weekday: 'long' })}</div>
                  <div style="font-size:1rem;">${d.toLocaleDateString('vi-VN')}</div>
                  <div style="font-size:0.95rem;">Đinh Dậu/Nhâm Ngọ/Ất Tỵ<br>Sao chuẩn: Trực Định<br>Ngày Hoàng đạo: Minh Đường</div>
                </div>
              </div>
            `;
            // Box 2: Giờ hoàng đạo
            document.getElementById('fs-hour-box').innerHTML = `
              <div style="font-weight:600;font-size:1.1rem;">Giờ hoàng đạo</div>
              <div style="font-size:1rem;">Tý: 23-1<br>Dần: 3-5<br>Mão: 5-7<br>Ngọ: 11-13<br>Mùi: 13-15</div>
            `;
            // Box 3: Việc nên làm
            document.getElementById('fs-good-box').innerHTML = `
              <div style="font-weight:600;font-size:1.1rem;">Việc nên làm</div>
              <div style="font-size:1rem;">Cát Thần: Minh Đường - Minh Đường Hoàng Đạo - Nguyệt Tài - Kính Tâm - Tuế Hợp - Hoạt Diệu - Dân Nhật - Hoàng An - Nhân Chuyên<br>Việc Nên Làm: nghỉ thương quan, an sàng, an táo, tu trạch, tạo trạch, nhập trạch cát; đi dời, xuất hành, khai thị, khai thương, cầu tài, tạo tàng; cưới hỏi, nhập trạch, thăng chức, xuất hành (hoá giải các sao xấu: Giác, Khuê, Ngưu, Đẩu, Tinh, Cang);</div>
            `;
            // Box 4: Việc nên tránh
            document.getElementById('fs-bad-box').innerHTML = `
              <div style="font-weight:600;font-size:1.1rem;">Việc nên tránh</div>
              <div style="font-size:1rem;">Hung Thần: Thiên Cương - Địa Tặc - Tiểu Hồng Sa - Trùng Tang - Thiên Lại - Tiểu Hao - Lục Bất Thành - Thần Cách<br>Việc Không Nên Làm: tạo tác, an môn, táng mai tốn nhân đinh;</div>
            `;
        }

        // Arrange Functions
        function initArrange() {
            const uploadArea = document.getElementById('upload-area');
            const fileInput = document.getElementById('room-image');

            uploadArea.addEventListener('click', () => fileInput.click());

            uploadArea.addEventListener('dragover', (e) => {
                e.preventDefault();
                uploadArea.classList.add('dragover');
            });

            uploadArea.addEventListener('dragleave', () => {
                uploadArea.classList.remove('dragover');
            });

            uploadArea.addEventListener('drop', (e) => {
                e.preventDefault();
                uploadArea.classList.remove('dragover');
                const file = e.dataTransfer.files[0];
                if (file && file.type.startsWith('image/')) {
                    handleImageUpload(file);
                }
            });

            fileInput.addEventListener('change', (e) => {
                const file = e.target.files[0];
                if (file) {
                    handleImageUpload(file);
                }
            });
        }

        function handleImageUpload(file) {
            const reader = new FileReader();
            reader.onload = (e) => {
                const uploadArea = document.getElementById('upload-area');
                uploadArea.innerHTML = `
                    <img src="${e.target.result}" alt="Uploaded room" style="max-width: 100%; max-height: 300px;">
                    <button class="btn btn-sm btn-danger mt-2" onclick="resetUpload()">
                        <i class="fa fa-times"></i> Xóa ảnh
                    </button>
                `;
            };
            reader.readAsDataURL(file);
        }

        function resetUpload() {
            const uploadArea = document.getElementById('upload-area');
            uploadArea.innerHTML = `
                <input type="file" id="room-image" accept="image/*" class="d-none">
                <div class="upload-placeholder">
                    <i class="fa fa-cloud-upload-alt fa-3x mb-3"></i>
                    <p>Kéo thả hoặc click để tải ảnh lên</p>
                </div>
            `;
            initArrange();
        }

        // Hàm chuyển đổi Markdown thành HTML
        function markdownToHtml(markdown) {
            if (!markdown) return '';

            let html = markdown;

            // Chuyển đổi các ký hiệu Markdown cơ bản
            // Bold: **text** hoặc __text__
            html = html.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
            html = html.replace(/__(.*?)__/g, '<strong>$1</strong>');

            // Italic: *text* hoặc _text_
            html = html.replace(/\*(.*?)\*/g, '<em>$1</em>');
            html = html.replace(/_(.*?)_/g, '<em>$1</em>');

            // Headers: # ## ###
            html = html.replace(/^### (.*$)/gim, '<h4 style="margin: 10px 0 5px 0; color: #388e3c; font-weight: 600;">$1</h4>');
            html = html.replace(/^## (.*$)/gim, '<h3 style="margin: 12px 0 8px 0; color: #388e3c; font-weight: 600;">$1</h3>');
            html = html.replace(/^# (.*$)/gim, '<h2 style="margin: 15px 0 10px 0; color: #388e3c; font-weight: 600;">$1</h2>');

            // Lists: - item hoặc * item
            html = html.replace(/^[\s]*[-*][\s]+(.*)/gim, '<li style="margin: 3px 0;">$1</li>');
            html = html.replace(/(<li.*<\/li>)/s, '<ul style="margin: 8px 0; padding-left: 20px;">$1</ul>');

            // Numbered lists: 1. item
            html = html.replace(/^[\s]*\d+\.[\s]+(.*)/gim, '<li style="margin: 3px 0;">$1</li>');
            html = html.replace(/(<li.*<\/li>)/s, '<ol style="margin: 8px 0; padding-left: 20px;">$1</ol>');

            // Links: [text](url)
            html = html.replace(/\[([^\]]+)\]\(([^)]+)\)/g, '<a href="$2" target="_blank" style="color: #4A8B2C; text-decoration: underline;">$1</a>');

            // Line breaks
            html = html.replace(/\n\n/g, '<br><br>');
            html = html.replace(/\n/g, '<br>');

            // Code blocks: `code`
            html = html.replace(/`([^`]+)`/g, '<code style="background: #f5f5f5; padding: 2px 4px; border-radius: 3px; font-family: monospace;">$1</code>');

            return html;
        }

        let globalRenderChat = null;
        // AI Chat Functions
        function initAIChat() {
            const messagesEl = document.getElementById('fs-chat-messages');
            const form = document.getElementById('fs-chat-form');
            const input = document.getElementById('fs-chat-input');
            const upload = document.getElementById('fs-chat-upload');
            const createImgWrap = document.getElementById('fs-create-image-btn-wrap');
            const imagePreview = document.getElementById('fs-image-preview');
            const previewImg = document.getElementById('fs-preview-img');
            const removeImageBtn = document.getElementById('fs-remove-image');

            let aiReplyCount = 0;
            let currentImage = null;
            let chatHistory = [
                { role: 'assistant', content: 'Xin chào! Tôi là AI phong thủy, bạn cần tư vấn gì?' },
            ];
            renderChat();

            // Remove old event listeners if any
            const newForm = form.cloneNode(true);
            form.parentNode.replaceChild(newForm, form);
            const newUpload = newForm.querySelector('#fs-chat-upload');
            const newInput = newForm.querySelector('#fs-chat-input');

            // Thêm nút tạo hình ảnh
            createImgWrap.innerHTML = `
                <button class="fs-create-image-btn" id="fs-create-image-btn" onclick="generateImage()">
                    <span class="icon-wrap"><i class="fa fa-magic"></i></span>
                    <span class="btn-text">Tạo hình ảnh phong thủy</span>
                </button>
            `;

            function showCreateImageBtn() {
                createImgWrap.style.display = 'block';
            }

            // Xử lý hiển thị ảnh preview
            newUpload.addEventListener('change', function (e) {
                if (e.target.files && e.target.files[0]) {
                    const file = e.target.files[0];
                    const reader = new FileReader();

                    reader.onload = function (e) {
                        previewImg.src = e.target.result;
                        imagePreview.style.display = 'block';
                        currentImage = {
                            file: file,
                            dataUrl: e.target.result
                        };
                        // Ẩn nút upload khi có ảnh
                        newUpload.parentElement.classList.add('hidden');
                    }

                    reader.readAsDataURL(file);
                }
            });

            // Xử lý xóa ảnh preview
            removeImageBtn.addEventListener('click', function () {
                imagePreview.style.display = 'none';
                previewImg.src = '';
                currentImage = null;
                newUpload.value = '';
                // Hiện lại nút upload khi xóa ảnh
                newUpload.parentElement.classList.remove('hidden');
            });

            // Xử lý gửi tin nhắn
            newForm.addEventListener('submit', async function (e) {
                e.preventDefault();
                const val = newInput.value.trim();
                if (!val && !currentImage) return;
                let base64 = null;

                // Thêm tin nhắn người dùng vào lịch sử
                if (val) {
                    chatHistory.push({ role: 'user', content: val });
                }
                if (currentImage) {
                    base64 = await toBase64(currentImage.file);
                }
                if (currentImage) {
                    chatHistory.push({
                        role: 'user',
                        content: [
                            {
                                type: "text",
                                text: val
                            },
                            {
                                type: "image_url",
                                image_url: {
                                    url: base64,
                                },
                            },
                        ],
                    });

                }

                // Xóa input và ảnh preview
                newInput.value = '';
                imagePreview.style.display = 'none';
                previewImg.src = '';
                currentImage = null;
                newUpload.value = '';

                // Render chat
                renderChat();

                try {
                    // Chuẩn bị dữ liệu gửi đến API
                    let apiData = {};

                    apiData = {
                        message: val,
                        messageHistory: chatHistory
                    }

                    let result = null;
                    // TODO: Gọi API của bạn ở đây
                    if (base64) {
                        const response = await fetch('http://14.225.198.239:3000/api/chat/text', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify(apiData)
                        });
                        result = await response.json();
                    } else {
                        const response = await fetch('http://14.225.198.239:3000/api/chat/text', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify(apiData)
                        });
                        result = await response.json();
                    }

                    console.log(result);

                    // Demo response
                    setTimeout(() => {
                        const aiResponse = {
                            role: 'assistant',
                            content: result.message
                        };
                        chatHistory.push(aiResponse);
                        aiReplyCount++;
                        renderChat();
                        // Hiển thị nút tạo hình ảnh sau 3 lượt chat
                        if (aiReplyCount >= 3) {
                            showCreateImageBtn();
                        }
                    }, 600);

                } catch (error) {
                    console.error('Error:', error);
                    chatHistory.push({
                        role: 'assistant',
                        content: 'Xin lỗi, đã có lỗi xảy ra. Vui lòng thử lại sau.'
                    });
                    renderChat();
                }
            });

            function renderChat(result = null) {
                messagesEl.innerHTML = chatHistory.map(msg => {
                    let content = msg.content;

                    // Chuyển đổi Markdown thành HTML cho tin nhắn từ AI
                    if (msg.role === 'assistant') {
                        content = markdownToHtml(content);
                    }

                    //if content is Array
                    if (Array.isArray(content)) {
                        content = content.map(item => {
                            if (item.type === 'text') {
                                return item.text;
                            } else if (item.type === 'image_url') {
                                if (msg.role === 'assistant') {
                                    return `<div class="fs-chat-image"><img src="${item.image_url.url}" alt="AI generated image"><button class='download-btn' title='Tải ảnh xuống' onclick='downloadImage("${item.image_url.url}")'><i class='fa fa-download'></i></button></div>`;
                                } else {
                                    return `<div class="fs-chat-image"><img src="${item.image_url.url}" alt="Uploaded image"></div>`;
                                }
                            }
                        }).join('');
                    }

                    return `<div class="fs-chat-msg ${msg.role}">${content}</div>`;
                }).join('');

                if (result) {
                    const resultContent = markdownToHtml(result.message);
                    messagesEl.innerHTML += `<div class="fs-chat-msg assistant">${resultContent}</div>`;
                    if (result.image) {
                        messagesEl.innerHTML += `<div class="fs-chat-image"><img src="${result.image}" alt="Generated image"></div>`;
                    }
                }

                messagesEl.scrollTop = messagesEl.scrollHeight;
            }

            globalRenderChat = renderChat;
            globalMessageHistory = chatHistory;
        }

        async function generateImage() {
            if (!await checkToken()) return;
            const token = localStorage.getItem('token');
            const createBtn = document.getElementById('fs-create-image-btn');
            const btnText = createBtn.querySelector('.btn-text');
            const iconWrap = createBtn.querySelector('.icon-wrap');

            // Disable nút và hiển thị loading
            createBtn.disabled = true;
            createBtn.style.opacity = '0.6';
            btnText.textContent = 'Đang tạo hình ảnh...';
            iconWrap.innerHTML = '<i class="fa fa-spinner fa-spin"></i>';

            try {
                const apiData = {
                    message: " Tạo Hình Ảnh phong thủy",
                    messageHistory: globalMessageHistory
                }
                const response = await fetch('http://14.225.198.239:3000/api/chat/generate-image-by-image', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${token}`
                    },
                    body: JSON.stringify(apiData)
                });
                result = await response.json();
                if (result.status === 401) {
                    alert('Vui lòng đăng nhập để sử dụng tính năng này');
                    return;
                }

                globalMessageHistory = result.messageHistory;
                globalRenderChat(result);
            } catch (error) {
                console.error('Error generating image:', error);
                // Thêm tin nhắn lỗi vào chat
                globalMessageHistory.push({
                    role: 'assistant',
                    content: 'Xin lỗi, đã có lỗi xảy ra khi tạo hình ảnh. Vui lòng thử lại sau.'
                });
                globalRenderChat();
            } finally {
                // Ẩn nút tạo hình ảnh sau khi tạo xong
                createBtn.style.display = 'none';
            }
        }

        function toBase64(file) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.readAsDataURL(file);
                reader.onload = () => resolve(reader.result);
                reader.onerror = error => reject(error);
            });
        }

        // Thêm CSS cho phần preview ảnh
        const style = document.createElement('style');
        style.textContent = `
            .fs-image-preview {
                padding: 10px;
                background: #f8f9fa;
                border-radius: 8px;
                margin: 10px 0;
            }
            .preview-container {
                position: relative;
                display: inline-block;
            }
            .preview-container img {
                max-height: 150px;
                border-radius: 4px;
            }
            #fs-remove-image {
                position: absolute;
                top: -10px;
                right: -10px;
                padding: 2px 6px;
                border-radius: 50%;
            }
            .fs-chat-image {
                margin-top: 8px;
                position: relative;
                display: inline-block;
                width: 100%;
                max-width: 100%;
            }
            .fs-chat-image img {
                max-width: 100%;
                max-height: 400px;
                border-radius: 4px;
                display: block;
                width: 100%;
                object-fit: contain;
            }
            .fs-chat-image .download-btn {
                position: absolute;
                bottom: 10px;
                right: 10px;
                background: rgba(255,255,255,0.85);
                border: none;
                border-radius: 50%;
                width: 38px;
                height: 38px;
                display: flex;
                align-items: center;
                justify-content: center;
                box-shadow: 0 2px 8px rgba(44,63,80,0.13);
                cursor: pointer;
                transition: background 0.2s;
                z-index: 2;
            }
            .fs-chat-image .download-btn:hover {
                background: #4A8B2C;
                color: #fff;
            }
        `;
        document.head.appendChild(style);

        async function checkToken() {
            const token = localStorage.getItem('token');
            if (!token || token === 'null' || token === 'undefined') {
                alert('Vui lòng đăng nhập để sử dụng tính năng này');
                return false;
            }
            return true;
        }

        // Hàm tải ảnh về máy
        function downloadImage(url) {
            const link = document.createElement('a');
            link.href = url;
            link.download = 'phongthuy-image.jpg';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }
    </script>
</body>

</html>